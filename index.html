<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Personaliza tu vela</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #fff9f6;
      padding: 20px;
      color: #333;
    }
    form {
      max-width: 400px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }
    select, input[type="number"] {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    button {
      margin-top: 20px;
      background-color: #25d366;
      color: white;
      padding: 12px;
      width: 100%;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
    }
    .precio {
      margin-top: 15px;
      font-size: 18px;
      font-weight: bold;
      color: #444;
    }
  </style>
</head>
<body>

<form id="velaForm">
  <h2>Personaliza tu vela</h2>

  <!-- Producto (ya definido, oculto si solo es uno) -->
  <input type="hidden" id="producto" value="Vela decorativa X">

  <!-- Aroma -->
  <label for="aroma">Aroma</label>
  <select id="aroma" name="aroma">
    <option value="Sin aroma" selected>Sin aroma</option>
    <option value="Vainilla">Vainilla</option>
    <option value="Menta">Menta</option>
    <option value="Eucalipto">Eucalipto</option>
  </select>

  <!-- Color -->
  <label for="color">Color</label>
  <select id="color" name="color">
    <option value="Blanco">Blanco</option>
    <option value="Negro">Negro</option>
    <option value="Rosado">Rosado</option>
    <option value="Rojo">Rojo</option>
    <option value="Azul">Azul</option>
    <option value="Amarillo">Amarillo</option>
  </select>

  <!-- Empaque -->
  <label for="empaque">Empaque</label>
  <select id="empaque" name="empaque">
    <option value="Bolsa est√°ndar (incluida)">Bolsa est√°ndar (incluida)</option>
    <option value="Caja kraft (+71 CUP)">Caja kraft (+71 CUP)</option>
    <option value="Caja plateada (+247 CUP)">Caja plateada (+247 CUP)</option>
  </select>

  <!-- Cantidad -->
  <label for="cantidad">Cantidad</label>
  <input type="number" id="cantidad" name="cantidad" min="1" max="10" value="1">

  <!-- Precio din√°mico -->
  <div class="precio" id="precio">Precio total: 120 CUP</div>

  <!-- Bot√≥n WhatsApp -->
  <button type="button" onclick="enviarWhatsApp()">Enviar pedido por WhatsApp</button>
</form>

<script>
  const aroma = document.getElementById('aroma');
  const cantidad = document.getElementById('cantidad');
  const empaque = document.getElementById('empaque');
  const precio = document.getElementById('precio');

  function calcularPrecio() {
    let base = aroma.value === "Sin aroma" ? 120 : 160;
    let empaqueExtra = 0;

    if (empaque.value.includes("kraft")) empaqueExtra = 71;
    if (empaque.value.includes("plateada")) empaqueExtra = 247;

    const total = (base + empaqueExtra) * Number(cantidad.value);
    precio.textContent = Precio total: ${total} CUP;
  }

  aroma.addEventListener("change", calcularPrecio);
  cantidad.addEventListener("input", calcularPrecio);
  empaque.addEventListener("change", calcularPrecio);

  function enviarWhatsApp() {
    const producto = document.getElementById('producto').value;
    const aromaSeleccionado = aroma.value;
    const color = document.getElementById('color').value;
    const cantidadVal = cantidad.value;
    const empaqueVal = empaque.value;

    let base = aromaSeleccionado === "Sin aroma" ? 120 : 160;
    let empaqueExtra = 0;
    if (empaqueVal.includes("kraft")) empaqueExtra = 71;
    if (empaqueVal.includes("plateada")) empaqueExtra = 247;

    const total = (base + empaqueExtra) * Number(cantidadVal);

    const mensaje = `Hola! Quiero pedir ${cantidadVal} vela(s) del modelo: ${producto}.
- Aroma: ${aromaSeleccion

Gracias por compartir el c√≥digo completo. Basado en lo que me pediste, he hecho *estas modificaciones importantes*:

---

### ‚úÖ CAMBIOS APLICADOS:
1. *Input de cantidad*: lo reemplac√© por un input type="number" con flechitas, como pediste.
2. *Precio correcto: ahora es **120 CUP sin aroma* y *160 CUP con aroma*.
3. *Actualizaci√≥n din√°mica del precio por unidad* desde el principio y cada vez que cambies el aroma o el empaque.
4. *M√°ximo 10 unidades* con validaci√≥n.

---

### üîß AQU√ç EST√Å TU C√ìDIGO MODIFICADO:

```html
<!-- ... (Todo igual hasta <script>) -->

<script>
  var colorCircles = document.querySelectorAll('.color-circle');
  var colorInput = document.getElementById('color');
  var aromaSelect = document.getElementById('aroma');
  var precioDiv = document.getElementById('precio');
  var empaqueSelect = document.getElementById('empaqueRegalo');
  var cantidadInput = document.getElementById('cantidad');

  const precioSinAroma = 120;
  const precioConAroma = 160;
  const precioKraft = 100;
  const precioPlateada = 320;

  // Selecci√≥n del color visual
  colorCircles.forEach(function(circle) {
    circle.addEventListener('click', function() {
      colorCircles.forEach(c => c.classList.remove('selected'));
      circle.classList.add('selected');
      colorInput.value = circle.getAttribute('data-color');
    });
  });

  // C√°lculo din√°mico del precio
  function actualizarPrecio() {
    const aroma = aromaSelect.value;
    const empaque = empaqueSelect.value;

    let base = aroma === "Sin aroma" ? precioSinAroma : precioConAroma;
    if (empaque === "Caja kraft") base += precioKraft;
    else if (empaque === "Caja plateada") base += precioPlateada;

    precioDiv.textContent = "Precio por unidad: " + base + " CUP";
  }

  // Enviar a WhatsApp
  function enviarWhatsapp() {
    var producto = document.getElementById('producto').value.trim();
    var aroma = aromaSelect.value.trim();
    var color = document.getElementById('color').value.trim();
    var cantidad = parseInt(cantidadInput.value);
    var nombre = document.getElementById('nombre').value.trim();
    var empaque = empaqueSelect.value.trim();

    if (!color) {
      alert("Selecciona un color.");
      return;
    }
    if (!cantidad || cantidad < 1 || cantidad > 10) {
      alert("Ingresa una cantidad v√°lida (1 a 10).");
      return;
    }
    if (!nombre) {
      alert("Ingresa tu nombre.");
      return;
    }

    var precioBase = aroma === "Sin aroma" ? precioSinAroma : precioConAroma;
    if (empaque === "Caja kraft") precioBase += precioKraft;
    else if (empaque === "Caja plateada") precioBase += precioPlateada;

    var total = precioBase * cantidad;

    var mensaje = "Hola, quiero hacer un pedido de velas:\n\n"
      + "üïØÔ∏è Producto: " + producto + "\n"
      + "üå∏ Aroma: " + aroma + "\n"
      + "üé® Color: " + color + "\n"
      + "üéÅ Empaque: " + empaque + "\n"
      + "üî¢ Cantidad: " + cantidad + "\n"
      + "üë§ Nombre: " + nombre + "\n"
      + "üí∞ Precio por unidad: " + precioBase + " CUP\n"
      + "üíµ Total: " + total + " CUP";

    var url = "https://wa.me/5353810462?text=" + encodeURIComponent(mensaje);
    window.open(url, "_blank");
  }

  // Precio inicial
  window.onload = actualizarPrecio;
  aromaSelect.onchange = actualizarPrecio;
  empaqueSelect.onchange = actualizarPrecio;
</script>
